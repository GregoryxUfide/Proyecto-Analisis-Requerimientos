@model IEnumerable<hotelproyecto.ViewModel.ContabilidadViewModel>

@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    ViewData["Title"] = "Gestión de Contabilidad";
}

<div class="admin-card">
    <div class="card-header">
        <h2>@ViewData["Title"]</h2>
        <a asp-action="Crear" class="btn btn-primary">
            Nuevo Reporte
        </a>
    </div>

    <form asp-action="Index" method="get" class="form-filter" style="margin-bottom: 1.5rem;">
        <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: flex-end;">
            <div class="filter-group">
                <label>Mes:</label>
                <select name="mes" class="form-control">
                    <option value="">-- Todos --</option>
                    @for (int i = 1; i <= 12; i++)
                    {
                        var mesNombre = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(i);
                        <option value="@i" selected="@(ViewBag.MesActual == i ? "selected" : null)">
                            @mesNombre
                        </option>
                    }
                </select>
            </div>

            <div class="filter-group">
                <label>Año:</label>
                <input type="number" name="anio" value="@ViewBag.AnioActual" class="form-control" placeholder="Ej: 2025" />
            </div>

            <div class="filter-group">
                <button type="submit" class="btn btn-primary">Filtrar</button>
                <a href="@Url.Action("Index")" class="btn btn-secondary ml-2">Limpiar</a>
            </div>
        </div>
    </form>

    <div class="table-responsive">
        <table class="employees-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Fecha</th>
                    <th>Monto</th>
                    <th>Detalle</th>
                    <th>Comentario</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td data-label="ID">@item.IdContabilidad</td>
                        <td data-label="Fecha">@item.Fecha.ToString()</td>
                        <td data-label="Monto">@item.Monto.ToString("C")</td>
                        <td data-label="Detalle">@item.Detalle</td>
                        <td data-label="Comentario">@item.Comentario</td>
                        <td data-label="Acciones" class="actions">
                            <a asp-action="Editar" asp-route-id="@item.IdContabilidad" class="btn-action edit">Editar</a>
                            <a asp-action="Detalles" asp-route-id="@item.IdContabilidad" class="btn-action details">Detalles</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
